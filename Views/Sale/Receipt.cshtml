@model SaleConfirmationViewModel
@{
    ViewData["Title"] = "Comprobante de Compra";
    Layout = null; // Para impresión sin layout
}

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Comprobante - @Model.ReceiptNumber</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        @@media print {
            .no-print {
                display: none !important;
            }

            .print-only {
                display: block !important;
            }
        }

        .print-only {
            display: none;
        }

        .receipt-container {
            max-width: 600px;
            margin: 0 auto;
            border: 1px solid #ddd;
            padding: 20px;
        }
    </style>
</head>
<body>
    <div class="receipt-container">
        <!-- Header -->
        <div class="text-center mb-4">
            <h2 class="text-primary">TransportAgency</h2>
            <p class="mb-1">Agencia de Transportes</p>
            <p class="mb-1">RUC: 12345678901</p>
            <p class="mb-0">Tel: +51 123 456 789</p>
            <hr>
            <h4>BOLETO DE VIAJE</h4>
        </div>

        <!-- Receipt Info -->
        <div class="row mb-3">
            <div class="col-6">
                <strong>Recibo N°:</strong><br>
                @Model.ReceiptNumber
            </div>
            <div class="col-6 text-end">
                <strong>Fecha de Emisión:</strong><br>
                @Model.SaleDateFormatted
            </div>
        </div>

        <hr>

        <!-- Passenger Info -->
        <div class="mb-3">
            <h6>INFORMACIÓN DEL PASAJERO</h6>
            <div class="row">
                <div class="col-8">
                    <strong>Nombre:</strong> @Model.CustomerName
                </div>
                <div class="col-4">
                    <strong>Documento:</strong> @Model.DocumentNumber
                </div>
            </div>
        </div>

        <hr>

        <!-- Trip Info -->
        <div class="mb-3">
            <h6>INFORMACIÓN DEL VIAJE</h6>
            <div class="row mb-2">
                <div class="col-12">
                    <strong>Ruta:</strong> @Model.TripInfo
                </div>
            </div>
            <div class="row mb-2">
                <div class="col-6">
                    <strong>Fecha de Viaje:</strong><br>
                    @Model.TripDepartureTime.ToString("dd/MM/yyyy")
                </div>
                <div class="col-6">
                    <strong>Hora de Salida:</strong><br>
                    @Model.TripDepartureTime.ToString("HH:mm")
                </div>
            </div>
            <div class="row mb-2">
                <div class="col-6">
                    <strong>Bus:</strong> @Model.BusInfo
                </div>
                <div class="col-6">
                    <strong>Asiento:</strong>
                    <span class="badge bg-primary">@Model.SeatNumber</span>
                </div>
            </div>
        </div>

        <hr>

        <!-- Payment Info -->
        <div class="mb-3">
            <h6>INFORMACIÓN DE PAGO</h6>
            <div class="row">
                <div class="col-8">
                    <strong>Monto Total:</strong>
                </div>
                <div class="col-4 text-end">
                    <h5 class="text-success mb-0">@Model.AmountFormatted</h5>
                </div>
            </div>
        </div>

        <hr>

        <!-- Footer -->
        <div class="text-center mt-4">
            <p class="mb-2"><strong>¡Gracias por viajar con nosotros!</strong></p>
            <small class="text-muted">
                Conserve este boleto durante todo el viaje.<br>
                Presente su documento de identidad al abordar.
            </small>
        </div>

        <!-- QR Code Placeholder -->
        <div class="text-center mt-3 print-only">
            <div class="border p-3 d-inline-block">
                <small>Código QR de Validación</small><br>
                <div style="width: 80px; height: 80px; background: #f0f0f0; margin: 10px auto;"></div>
                <small>@Model.ReceiptNumber</small>
            </div>
        </div>
    </div>

    <!-- Action Buttons -->
    <div class="text-center mt-4 no-print">
        <button onclick="window.print()" class="btn btn-primary me-2">
            <i class="fas fa-print me-1"></i>Imprimir
        </button>
        <a href="@Url.Action("DownloadReceipt", new { saleId = Model.SaleId })" class="btn btn-success me-2">
            <i class="fas fa-download me-1"></i>Descargar PDF
        </a>
        <a href="@Url.Action("Index", "Home")" class="btn btn-outline-secondary">
            <i class="fas fa-home me-1"></i>Inicio
        </a>
    </div>

    <script src="https://kit.fontawesome.com/your-kit-id.js"></script>
    <script>
        // Auto-print when opened in new window
        if (window.location.search.includes('print=true')) {
            window.onload = function() {
                window.print();
            };
        }
    </script>
</body>
</html>